import { eachSeries, each as asyncEach } from 'async';
import { spawnSync } from 'child_process';
/**
 * Find Java on Windows by checking registry keys.
 */
export default function windowsFindJavaHome(cb) {
    // Windows: JDK path is in either of the following registry keys:
    // - HKLM\Software\JavaSoft\Java Development Kit\1.[version] [JDK arch == OS arch]
    // - HKLM\Software\Wow6432Node\JavaSoft\Java Development Kit\1.[version] [32-bit JDK Arch, 64-bit OS arch]
    // TODO: Get a proper listing of all JDKs at these locations.
    const keysToCheck = [
        `HKLM\\SOFTWARE\\JavaSoft\\JDK`,
        `HKLM\\SOFTWARE\\JavaSoft\\Java Development Kit`,
        `HKLM\\SOFTWARE\\JavaSoft\\Java Runtime Environment`,
        `HKLM\\SOFTWARE\\Wow6432Node\\JavaSoft\\JDK`,
        `HKLM\\SOFTWARE\\Wow6432Node\\JavaSoft\\Java Development Kit`,
        `HKLM\\SOFTWARE\\Wow6432Node\\JavaSoft\\Java Runtime Environment`
    ];
    const discoveredJavaHomes = [];
    eachSeries(keysToCheck, (key, asyncCb) => {
        getRegistryKey(key, (err, values) => {
            if (!err) {
                Object.keys(values).forEach((value) => {
                    const keyInfo = values[value];
                    if (typeof (keyInfo) === 'object' && keyInfo !== null) {
                        // subkey.
                        const javaHome = keyInfo.JavaHome;
                        if (typeof (javaHome) === "string") {
                            discoveredJavaHomes.push(javaHome);
                        }
                    }
                });
            }
            asyncCb();
        });
    }, (err) => {
        cb(discoveredJavaHomes, 'exe');
    });
}
const ITEM_PATTERN = /^([a-zA-Z0-9_\s\\-]+)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;
/**
 * Retrieves the given registry key using the REG command line utility.
 * Returns an error if it fails, or the key as a dictionary if it succeeds.
 * Inspired by node-winreg, but rewritten here due to a bug in that module.
 * https://github.com/fresc81/node-winreg
 */
function getRegistryKey(key, cb) {
    const args = ['QUERY', key];
    try {
        const proc = spawnSync('REG', args, {
            cwd: undefined,
            env: process.env,
            stdio: ['ignore', 'pipe', 'ignore']
        });
        if (proc.status !== 0) {
            return cb(new Error(`REG process exited with code ${proc.status}:\n${proc.stderr.toString()}\n${proc.stdout.toString()}`));
        }
        // Success
        const lines = proc.stdout.toString().split('\n');
        let lineNumber = 0;
        const items = [];
        const rv = {};
        lines.forEach((line, idx) => {
            lines[idx] = line.trim();
            if (lines[idx].length > 0) {
                if (lineNumber !== 0) {
                    items.push(lines[idx]);
                }
                ++lineNumber;
            }
        });
        asyncEach(items, (item, asyncCb) => {
            const match = ITEM_PATTERN.exec(item);
            if (match) {
                // rv[valName] = value;
                // Second item is the type; we don't care about that.
                rv[match[1].trim()] = match[3];
                asyncCb();
            }
            else if (item.slice(0, 4) === "HKEY") {
                // It's a HKEY_[etc]\ path. Recursively expand!
                getRegistryKey(item.trim(), (err, vals) => {
                    if (!err) {
                        rv[item.slice(item.lastIndexOf('\\') + 1)] = vals;
                    }
                    asyncCb(err);
                });
            }
            else {
                asyncCb();
            }
        }, (err) => {
            cb(err, rv);
        });
    }
    catch (e) {
        cb(e);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luMzIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90cy9saWIvcGxhdGZvcm1zL3dpbjMyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxVQUFVLEVBQUUsSUFBSSxJQUFJLFNBQVMsRUFBQyxNQUFNLE9BQU8sQ0FBQztBQUNwRCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBTXhDOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE9BQU8sVUFBVSxtQkFBbUIsQ0FBQyxFQUEyRDtJQUNyRyxpRUFBaUU7SUFDakUsa0ZBQWtGO0lBQ2xGLDBHQUEwRztJQUUxRyw2REFBNkQ7SUFDN0QsTUFBTSxXQUFXLEdBQWE7UUFDNUIsK0JBQStCO1FBQy9CLGdEQUFnRDtRQUNoRCxvREFBb0Q7UUFDcEQsNENBQTRDO1FBQzVDLDZEQUE2RDtRQUM3RCxpRUFBaUU7S0FDbEUsQ0FBQztJQUVGLE1BQU0sbUJBQW1CLEdBQWEsRUFBRSxDQUFDO0lBQ3pDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxHQUFXLEVBQUUsT0FBOEIsRUFBRSxFQUFFO1FBQ3RFLGNBQWMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFrQixFQUFFLE1BQWlCLEVBQUUsRUFBRTtZQUM1RCxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNSLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7b0JBQ3JDLE1BQU0sT0FBTyxHQUFHLE1BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDL0IsSUFBSSxPQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxJQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7d0JBQ3BELFVBQVU7d0JBQ1YsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQzt3QkFDbEMsSUFBSSxPQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssUUFBUSxFQUFFOzRC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TyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNmLENBQUMsQ0FBQyxDQUFDO2FBQ0o7aUJBQU07Z0JBQ0wsT0FBTyxFQUFFLENBQUM7YUFDWDtRQUNILENBQUMsRUFBRSxDQUFDLEdBQWtCLEVBQUUsRUFBRTtZQUN4QixFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2QsQ0FBQyxDQUFDLENBQUM7S0FDSjtJQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ1YsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ1A7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtlYWNoU2VyaWVzLCBlYWNoIGFzIGFzeW5jRWFjaH0gZnJvbSAnYXN5bmMnO1xuaW1wb3J0IHtzcGF3blN5bmN9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuXG5pbnRlcmZhY2UgSUtleUluZm8ge1xuICBbdmFsTmFtZTogc3RyaW5nXTogc3RyaW5nIHwgSUtleUluZm9cbn1cblxuLyoqXG4gKiBGaW5kIEphdmEgb24gV2luZG93cyBieSBjaGVja2luZyByZWdpc3RyeSBrZXlzLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB3aW5kb3dzRmluZEphdmFIb21lKGNiOiAoaG9tZXM6IHN0cmluZ1tdLCBleGVjdXRhYmxlRXh0ZW5zaW9uPzogc3RyaW5nKSA9PiB2b2lkKTogdm9pZCB7XG4gIC8vIFdpbmRvd3M6IEpESyBwYXRoIGlzIGluIGVpdGhlciBvZiB0aGUgZm9sbG93aW5nIHJlZ2lzdHJ5IGtleXM6XG4gIC8vIC0gSEtMTVxcU29mdHdhcmVcXEphdmFTb2Z0XFxKYXZhIERldmVsb3BtZW50IEtpdFxcMS5bdmVyc2lvbl0gW0pESyBhcmNoID09IE9TIGFyY2hdXG4gIC8vIC0gSEtMTVxcU29mdHdhcmVcXFdvdzY0MzJOb2RlXFxKYXZhU29mdFxcSmF2YSBEZXZlbG9wbWVudCBLaXRcXDEuW3ZlcnNpb25dIFszMi1iaXQgSkRLIEFyY2gsIDY0LWJpdCBPUyBhcmNoXVxuXG4gIC8vIFRPRE86IEdldCBhIHByb3BlciBsaXN0aW5nIG9mIGFsbCBKREtzIGF0IHRoZXNlIGxvY2F0aW9ucy5cbiAgY29uc3Qga2V5c1RvQ2hlY2s6IHN0cmluZ1tdID0gW1xuICAgIGBIS0xNXFxcXFNPRlRXQVJFXFxcXEphdmFTb2Z0XFxcXEpES2AsXG4gICAgYEhLTE1cXFxcU09GVFdBUkVcXFxcSmF2YVNvZnRcXFxcSmF2YSBEZXZlbG9wbWVudCBLaXRgLFxuICAgIGBIS0xNXFxcXFNPRlRXQVJFXFxcXEphdmFTb2Z0XFxcXEphdmEgUnVudGltZSBFbnZpcm9ubWVudGAsXG4gICAgYEhLTE1cXFxcU09GVFdBUkVcXFxcV293NjQzMk5vZGVcXFxcSmF2YVNvZnRcXFxcSkRLYCxcbiAgICBgSEtMTVxcXFxTT0ZUV0FSRVxcXFxXb3c2NDMyTm9kZVxcXFxKYXZhU29mdFxcXFxKYXZhIERldmVsb3BtZW50IEtpdGAsXG4gICAgYEhLTE1cXFxcU09GVFdBUkVcXFxcV293NjQzMk5vZGVcXFxcSmF2YVNvZnRcXFxcSmF2YSBSdW50aW1lIEVudmlyb25tZW50YFxuICBdO1xuXG4gIGNvbnN0IGRpc2NvdmVyZWRKYXZhSG9tZXM6IHN0cmluZ1tdID0gW107XG4gIGVhY2hTZXJpZXMoa2V5c1RvQ2hlY2ssIChrZXk6IHN0cmluZywgYXN5bmNDYjogKGVycj86IEVycm9yKSA9PiB2b2lkKSA9PiB7XG4gICAgZ2V0UmVnaXN0cnlLZXkoa2V5LCAoZXJyPzogRXJyb3IgfCBudWxsLCB2YWx1ZXM/OiBJS2V5SW5mbykgPT4ge1xuICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgT2JqZWN0LmtleXModmFsdWVzISkuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICBjb25zdCBrZXlJbmZvID0gdmFsdWVzIVt2YWx1ZV07XG4gICAgICAgICAgaWYgKHR5cGVvZihrZXlJbmZvKSA9PT0gJ29iamVjdCcgJiYga2V5SW5mbyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gc3Via2V5LlxuICAgICAgICAgICAgY29uc3QgamF2YUhvbWUgPSBrZXlJbmZvLkphdmFIb21lO1xuICAgICAgICAgICAgaWYgKHR5cGVvZihqYXZhSG9tZSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgZGlzY292ZXJlZEphdmFIb21lcy5wdXNoKGphdmFIb21lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYXN5bmNDYigpO1xuICAgIH0pO1xuICB9LCAoZXJyPzogRXJyb3IpOiB2b2lkID0+IHtcbiAgICBjYihkaXNjb3ZlcmVkSmF2YUhvbWVzLCAnZXhlJyk7XG4gIH0pO1xufVxuXG5jb25zdCBJVEVNX1BBVFRFUk4gPSAvXihbYS16QS1aMC05X1xcc1xcXFwtXSspXFxzKFJFR19TWnxSRUdfTVVMVElfU1p8UkVHX0VYUEFORF9TWnxSRUdfRFdPUkR8UkVHX1FXT1JEfFJFR19CSU5BUll8UkVHX05PTkUpXFxzKyhbXlxcc10uKikkLztcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGdpdmVuIHJlZ2lzdHJ5IGtleSB1c2luZyB0aGUgUkVHIGNvbW1hbmQgbGluZSB1dGlsaXR5LlxuICogUmV0dXJucyBhbiBlcnJvciBpZiBpdCBmYWlscywgb3IgdGhlIGtleSBhcyBhIGRpY3Rpb25hcnkgaWYgaXQgc3VjY2VlZHMuXG4gKiBJbnNwaXJlZCBieSBub2RlLXdpbnJlZywgYnV0IHJld3JpdHRlbiBoZXJlIGR1ZSB0byBhIGJ1ZyBpbiB0aGF0IG1vZHVsZS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9mcmVzYzgxL25vZGUtd2lucmVnXG4gKi9cbmZ1bmN0aW9uIGdldFJlZ2lzdHJ5S2V5KGtleTogc3RyaW5nLCBjYjogKGVycj86IEVycm9yIHwgbnVsbCwgdmFsdWVzPzogSUtleUluZm8pID0+IHZvaWQpIHtcbiAgY29uc3QgYXJncyA9IFsnUVVFUlknLCBrZXldO1xuICB0cnkge1xuICAgIGNvbnN0IHByb2MgPSBzcGF3blN5bmMoJ1JFRycsIGFyZ3MsIHtcbiAgICAgIGN3ZDogdW5kZWZpbmVkLFxuICAgICAgZW52OiBwcm9jZXNzLmVudixcbiAgICAgIHN0ZGlvOiBbJ2lnbm9yZScsICdwaXBlJywgJ2lnbm9yZSddXG4gICAgfSk7XG4gICAgaWYgKHByb2Muc3RhdHVzICE9PSAwKSB7XG4gICAgICByZXR1cm4gY2IobmV3IEVycm9yKGBSRUcgcHJvY2VzcyBleGl0ZWQgd2l0aCBjb2RlICR7cHJvYy5zdGF0dXN9OlxcbiR7cHJvYy5zdGRlcnIudG9TdHJpbmcoKX1cXG4ke3Byb2Muc3Rkb3V0LnRvU3RyaW5nKCl9YCkpO1xuICAgIH1cbiAgICAvLyBTdWNjZXNzXG4gICAgY29uc3QgbGluZXMgPSBwcm9jLnN0ZG91dC50b1N0cmluZygpLnNwbGl0KCdcXG4nKTtcbiAgICBsZXQgbGluZU51bWJlciA9IDA7XG4gICAgY29uc3QgaXRlbXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgcnY6IElLZXlJbmZvID0ge307XG5cbiAgICBsaW5lcy5mb3JFYWNoKChsaW5lOiBzdHJpbmcsIGlkeDogbnVtYmVyKSA9PiB7XG4gICAgICBsaW5lc1tpZHhdID0gbGluZS50cmltKCk7XG4gICAgICBpZiAobGluZXNbaWR4XS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChsaW5lTnVtYmVyICE9PSAwKSB7XG4gICAgICAgICAgaXRlbXMucHVzaChsaW5lc1tpZHhdKTtcbiAgICAgICAgfVxuICAgICAgICArK2xpbmVOdW1iZXI7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhc3luY0VhY2goaXRlbXMsIChpdGVtOiBzdHJpbmcsIGFzeW5jQ2I6IChlcnI/OiBFcnJvciB8IG51bGwpID0+IHZvaWQpID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoID0gSVRFTV9QQVRURVJOLmV4ZWMoaXRlbSk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgLy8gcnZbdmFsTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgLy8gU2Vjb25kIGl0ZW0gaXMgdGhlIHR5cGU7IHdlIGRvbid0IGNhcmUgYWJvdXQgdGhhdC5cbiAgICAgICAgcnZbbWF0Y2hbMV0udHJpbSgpXSA9IG1hdGNoWzNdO1xuICAgICAgICBhc3luY0NiKCk7XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0uc2xpY2UoMCwgNCkgPT09IFwiSEtFWVwiKSB7XG4gICAgICAgIC8vIEl0J3MgYSBIS0VZX1tldGNdXFwgcGF0aC4gUmVjdXJzaXZlbHkgZXhwYW5kIVxuICAgICAgICBnZXRSZWdpc3RyeUtleShpdGVtLnRyaW0oKSwgKGVyciwgdmFscykgPT4ge1xuICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICBydltpdGVtLnNsaWNlKGl0ZW0ubGFzdEluZGV4T2YoJ1xcXFwnKSArIDEpXSA9IHZhbHMhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhc3luY0NiKGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXN5bmNDYigpO1xuICAgICAgfVxuICAgIH0sIChlcnI/OiBFcnJvciB8IG51bGwpID0+IHtcbiAgICAgIGNiKGVyciwgcnYpO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2IoZSk7XG4gIH1cbn1cbiJdfQ==