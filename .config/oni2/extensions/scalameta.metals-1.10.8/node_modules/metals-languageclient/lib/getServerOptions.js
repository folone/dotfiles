"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServerOptions = void 0;
function getServerOptions({ metalsClasspath, serverProperties = [], clientName, javaConfig: { javaOptions, javaPath, extraEnv }, }) {
    const baseProperties = ["-Xss4m", "-Xms100m"];
    if (clientName) {
        baseProperties.push(`-Dmetals.client=${clientName}`);
    }
    const mainArgs = ["-classpath", metalsClasspath, "scala.meta.metals.Main"];
    // let user properties override base properties
    const launchArgs = [
        ...baseProperties,
        ...javaOptions,
        ...serverProperties,
        ...mainArgs,
    ];
    const env = () => (Object.assign(Object.assign({}, process.env), extraEnv));
    return {
        run: { command: javaPath, args: launchArgs, options: { env: env() } },
        debug: { command: javaPath, args: launchArgs, options: { env: env() } },
    };
}
exports.getServerOptions = getServerOptions;
