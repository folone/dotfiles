"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.detectLaunchConfigurationChanges = void 0;
function detectLaunchConfigurationChanges(workspace, promptRestart, additionalRestartKeys = []) {
    workspace.onDidChangeConfiguration((e) => {
        const promptRestartKeys = [
            "serverVersion",
            "serverProperties",
            "javaHome",
            "customRepositories",
            ...additionalRestartKeys,
        ];
        const shouldPromptRestart = promptRestartKeys.some((key) => e.affectsConfiguration(`metals.${key}`));
        if (shouldPromptRestart) {
            promptRestart({
                message: "Server launch configuration change detected. Reload the window for changes to take effect",
                reloadWindowChoice: "Reload Window",
                dismissChoice: "Not now",
            });
        }
    });
}
exports.detectLaunchConfigurationChanges = detectLaunchConfigurationChanges;
